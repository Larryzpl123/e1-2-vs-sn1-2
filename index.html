<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SN1 / SN2 / E1 / E2 — Decision Flowchart</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700&family=Source+Serif+4:wght@600;700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #ffffff;
    font-family: 'Source Sans 3', system-ui, sans-serif;
    color: #1a1a1a;
    display: flex; flex-direction: column; align-items: center;
    padding: 36px 16px 60px;
    min-height: 100vh;
  }
  h1 {
    font-family: 'Source Serif 4', Georgia, serif;
    font-size: 1.55rem; color: #334155; margin-bottom: 6px;
  }
  .legend {
    display: flex; gap: 22px; margin: 10px 0 20px;
    flex-wrap: wrap; justify-content: center;
  }
  .legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.82rem; color: #6b7280; }
  .swatch { width: 16px; height: 16px; border-radius: 4px; border: 2.5px solid; }

  #chart { width: 100%; max-width: 1050px; }

  /* ── Mermaid overrides ── */
  .node rect, .node polygon, .node circle { rx: 8 !important; }

  /* SN2 nodes — blue */
  .sn2 rect  { fill: #eff6ff !important; stroke: #2563eb !important; stroke-width: 3px !important; }
  .sn2 .nodeLabel { color: #2563eb !important; font-weight: 700 !important; font-size: 15px !important; }

  /* SN1 nodes — green */
  .sn1 rect  { fill: #f0fdf4 !important; stroke: #16a34a !important; stroke-width: 3px !important; }
  .sn1 .nodeLabel { color: #16a34a !important; font-weight: 700 !important; font-size: 15px !important; }

  /* E2 nodes — dark red */
  .e2 rect   { fill: #fef2f2 !important; stroke: #b91c1c !important; stroke-width: 3px !important; }
  .e2 .nodeLabel  { color: #b91c1c !important; font-weight: 700 !important; font-size: 15px !important; }

  /* E1 nodes — gold */
  .e1 rect   { fill: #fefce8 !important; stroke: #ca8a04 !important; stroke-width: 3px !important; }
  .e1 .nodeLabel  { color: #ca8a04 !important; font-weight: 700 !important; font-size: 15px !important; }

  /* Start node */
  .start rect { fill: #f1f5f9 !important; stroke: #334155 !important; stroke-width: 2.5px !important; }
  .start .nodeLabel { color: #334155 !important; font-weight: 700 !important; font-size: 15px !important; }

  /* Question diamonds */
  .question .label { color: #374151 !important; font-weight: 600 !important; }
  .question polygon { fill: #f8f9fa !important; stroke: #9ca3af !important; stroke-width: 2px !important; }

  /* Note */
  .note rect { fill: transparent !important; stroke: none !important; }
  .note .nodeLabel { color: #9ca3af !important; font-style: italic !important; font-size: 11px !important; }

  /* Edge labels */
  .edgeLabel { font-size: 12px !important; font-weight: 700 !important; }
</style>
</head>
<body>

<h1>Substitution &amp; Elimination — Decision Flowchart</h1>
<div class="legend">
  <div class="legend-item"><div class="swatch" style="border-color:#2563eb;background:#eff6ff"></div>S<sub>N</sub>2</div>
  <div class="legend-item"><div class="swatch" style="border-color:#16a34a;background:#f0fdf4"></div>S<sub>N</sub>1</div>
  <div class="legend-item"><div class="swatch" style="border-color:#b91c1c;background:#fef2f2"></div>E2</div>
  <div class="legend-item"><div class="swatch" style="border-color:#ca8a04;background:#fefce8"></div>E1</div>
</div>

<div id="chart">
<pre class="mermaid">
%%{init: {
  'theme': 'base',
  'themeVariables': {
    'primaryColor': '#f1f5f9',
    'primaryBorderColor': '#334155',
    'lineColor': '#94a3b8',
    'textColor': '#1a1a1a',
    'fontSize': '14px',
    'fontFamily': 'Source Sans 3, system-ui, sans-serif'
  }
}}%%

flowchart TD
    START["Substrate Carbon Degree?"]:::start

    START -- "0°" --> SN2_0["<b>SN2</b>"]:::sn2

    START -- "1°" --> Q1{"Bulky base?"}:::question
    Q1 -- "Yes" --> E2_1["<b>E2</b>"]:::e2
    Q1 -- "No" --> SN2_1["<b>SN2</b>"]:::sn2
    SN2_1 ~~~ NOTE1["(most of the time)"]:::note

    START -- "2°" --> Q2{"Nu⁻ has charge?"}:::question
    Q2 -- "Yes" --> Q2A{"Strong base?"}:::question
    Q2A -- "Yes" --> E2_2["<b>E2</b>"]:::e2
    Q2A -- "No" --> SN2_2["<b>SN2</b>"]:::sn2
    Q2 -- "No" --> Q2B{"Heat?"}:::question
    Q2B -- "Yes" --> E1_2["<b>E1</b>"]:::e1
    Q2B -- "No" --> SN1_2["<b>SN1</b>"]:::sn1

    START -- "3°" --> Q3{"Strong base?"}:::question
    Q3 -- "Yes" --> E2_3["<b>E2</b>"]:::e2
    Q3 -- "No" --> Q3B{"Heat?"}:::question
    Q3B -- "Yes" --> E1_3["<b>E1</b>"]:::e1
    Q3B -- "No" --> SN1_3["<b>SN1</b>"]:::sn1

    classDef start fill:#f1f5f9,stroke:#334155,stroke-width:2.5px,color:#334155,font-weight:700
    classDef question fill:#f8f9fa,stroke:#9ca3af,stroke-width:2px,color:#374151,font-weight:600
    classDef sn2 fill:#eff6ff,stroke:#2563eb,stroke-width:3px,color:#2563eb,font-weight:700
    classDef sn1 fill:#f0fdf4,stroke:#16a34a,stroke-width:3px,color:#16a34a,font-weight:700
    classDef e2 fill:#fef2f2,stroke:#b91c1c,stroke-width:3px,color:#b91c1c,font-weight:700
    classDef e1 fill:#fefce8,stroke:#ca8a04,stroke-width:3px,color:#ca8a04,font-weight:700
    classDef note fill:transparent,stroke:none,color:#9ca3af,font-style:italic

    linkStyle 0 stroke:#94a3b8,stroke-width:2px
    linkStyle 1 stroke:#94a3b8,stroke-width:2px
    linkStyle 2 stroke:#16a34a,stroke-width:2px
    linkStyle 3 stroke:#dc2626,stroke-width:2px
    linkStyle 4 stroke:transparent
    linkStyle 5 stroke:#94a3b8,stroke-width:2px
    linkStyle 6 stroke:#16a34a,stroke-width:2px
    linkStyle 7 stroke:#16a34a,stroke-width:2px
    linkStyle 8 stroke:#dc2626,stroke-width:2px
    linkStyle 9 stroke:#dc2626,stroke-width:2px
    linkStyle 10 stroke:#16a34a,stroke-width:2px
    linkStyle 11 stroke:#dc2626,stroke-width:2px
    linkStyle 12 stroke:#94a3b8,stroke-width:2px
    linkStyle 13 stroke:#16a34a,stroke-width:2px
    linkStyle 14 stroke:#dc2626,stroke-width:2px
    linkStyle 15 stroke:#16a34a,stroke-width:2px
    linkStyle 16 stroke:#dc2626,stroke-width:2px
</pre>
</div>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true, securityLevel: 'loose' });
</script>

</body>
</html>
